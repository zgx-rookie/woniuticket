
<!DOCTYPE HTML>
<html>
<head>
<title>Tables</title>
<script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
<script
	src="https://cdn.bootcss.com/vue-resource/1.5.1/vue-resource.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
<script
	src="https://cdn.bootcss.com/vue-resource/1.5.1/vue-resource.min.js"></script>
<script src="http://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"></script>
<script src="layer/layer.js"></script>
<link
	href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css"
	rel="stylesheet">
<style>
.saled {
	width: 100px;
	height: 100px;
	background-color: #00b9f1;
	cursor: pointer;
	background-image: url('/images/saled.png')
}

.unsale {
	width: 100px;
	height: 100px;
	background-color: #ccc;
	cursor: pointer;
	background-image: url('/images/unsale.png')
}

.has {
	width: 100px;
	height: 100px;
	background-color: #ccc;
	cursor: pointer;
	background-image: url('/images/unsale.png')
}

.no {
	width: 100px;
	height: 100px;
	background-color: #C0C0C0;
	cursor: pointer;
}
</style>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />
<script type="application/x-javascript">
	 addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } 
</script>

<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />

<!-- Custom CSS -->
<link href="css/style.css" rel='stylesheet' type='text/css' />

<!-- font-awesome icons CSS -->
<link href="css/font-awesome.css" rel="stylesheet">
<!-- //font-awesome icons CSS -->

<!-- side nav css file -->
<link href='css/SidebarNav.min.css' media='all' rel='stylesheet'
	type='text/css' />
<!-- side nav css file -->

<!-- js-->
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/modernizr.custom.js"></script>

<!--webfonts-->
<link
	href="http://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i&amp;subset=cyrillic,cyrillic-ext,latin-ext"
	rel="stylesheet">
<!--//webfonts-->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<!-- Metis Menu -->
<script src="js/metisMenu.min.js"></script>
<script src="js/custom.js"></script>
<link href="css/custom.css" rel="stylesheet">
<!--//Metis Menu -->
<!-- 座位相关样式 -->

<style>
.has {
	width: 50px;
	height: 50px;
	background-color: #FFFFFF;
	cursor: pointer;
	background-image: url('/images/seat.png')
}

.no {
	width: 50px;
	height: 50px;
	background-color: #FFFFFF;
	cursor: pointer;
	background-image: url('/images/noseat.png')
}

.selected-seat {
	background: url('/images/seat.png') center center no-repeat;
	background-size: 100% 100%;
}

.unselected-seat {
	background: url('/images/noseat.png') center center no-repeat;
	background-size: 100% 100%;
}

.trs {
	width: 50px;
	height: 50px;
	float: left;
	margin-top: 20px;
}

.screen {
	margin: 0 auto;
	height: 30px;
	width: 800px;
	background-color: #e3e3e3;
	border-radius: 0 0 30px 30px;
	color: #585858;
	line-height: 30px;
	text-align: center;
	margin-top: 20px;
	margin-left: 300px;
}

.mid-line {
	position: absolute;
	left: 54%;
	transform: translateX(-50%);
	top: 80px;
	width: 1px;
	height: 540px;
	border-left: 1px dashed #919191;
}
.appss {
    margin-left:50px;display:none
}

.appss2 {
    margin-left:50px;display:none
}

</style>
</head>
<body class="cbp-spmenu-push">
	<div class="main-content">
		<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left"
			id="cbp-spmenu-s1">
			<!--left-fixed -navigation-->
			<aside class="sidebar-left">
				<nav class="navbar navbar-inverse">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed"
							data-toggle="collapse" data-target=".collapse"
							aria-expanded="false">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
						<h1>
							<a class="navbar-brand" href="index.html"><span
								class="fa fa-area-chart"></span>蜗牛电影院</a>
						</h1>
					</div>
					<div class="collapse navbar-collapse"
						id="bs-example-navbar-collapse-1">
						<ul class="sidebar-menu">
							<li class="header">主菜单</li>
							<li class="treeview"><a href="#"> <i class="fa fa-table"></i>
									<span>影院管理</span> <i class="fa fa-angle-left pull-right"></i>
							</a>
								<ul class="treeview-menu">
									<li><a href="cinemas.html"><i class="fa fa-angle-right"></i>查看影院信息</a></li>
									<li><a href="usertables.html"><i class="fa fa-angle-right"></i>查看用户信息</a></li>
									<li><a href="ordertables.html"><i class="fa fa-angle-right"></i>查看订单信息</a></li>
								</ul></li>
							<li class="treeview"><a href="#"> <i class="fa fa-table"></i>
									<span>放映点管理</span> <i class="fa fa-angle-left pull-right"></i>
							</a>
								<ul class="treeview-menu">
									<li><a href="roomseatTable.html"><i class="fa fa-angle-right"></i>展厅管理</a></li>
								</ul></li>

							<li class="treeview"><a href="#"> <i class="fa fa-table"></i>
									<span>影片管理</span> <i class="fa fa-angle-left pull-right"></i>
							</a>
								<ul class="treeview-menu">
									<li><a href="movieTable.html"><i class="fa fa-angle-right"></i>影片列表</a></li>
									
								</ul></li>
							<li class="treeview"><a href="#"> <i class="fa fa-table"></i>
									<span>日志系统</span> <i class="fa fa-angle-left pull-right"></i>
							</a>
								<ul class="treeview-menu">
									<li><a href="tables.html"><i class="fa fa-angle-right"></i>日志管理</a></li>
								</ul></li>
						</ul>
					</div>
					<!-- /.navbar-collapse -->
				</nav>
			</aside>
		</div>
		<!--left-fixed -navigation-->

		<!-- header-starts -->
		<div class="sticky-header header-section ">
			<div class="header-left">

				<!--toggle button start-->
				<button id="showLeftPush">
					<i class="fa fa-bars"></i>
				</button>
				<!--toggle button end-->
				<div class="profile_details_left" id="socket">
					<!--notifications of menu start -->
					<ul class="nofitications-dropdown">
						<li class="dropdown head-dpdn"><a href="#"
							class="dropdown-toggle" data-toggle="dropdown"
							aria-expanded="false"><i class="fa fa-envelope"></i> <span
								class="badge" v-if="ms ==='true'">{{num}}</span></a>
							<ul class="dropdown-menu">
								<li>
									<div class="notification_header" v-if="ms ==='true'">
										<h4>有{{num}}笔新订单</h4>


									</div>
									<div v-if="ms ==='true'">
										<button type="submit" class="btn btn-default" @click="clear">清除消息</button>
									</div>

									<div class="notification_header" v-else>
										<h4>暂无消息</h4>
									</div>
								</li>

							</ul></li>


						<li class="dropdown head-dpdn"><a href="#"
							class="dropdown-toggle" data-toggle="dropdown"
							aria-expanded="false"><i class="fa fa-bell"></i></a>
							<ul class="dropdown-menu">
								<li>
									<div class="notification_header">
										<h3>You have 3 new notification</h3>
									</div>
								</li>
								<li><a href="#">
										<div class="user_img">
											<img src="images/4.jpg" alt="">
										</div>
										<div class="notification_desc">
											<p>Lorem ipsum dolor amet</p>
											<p>
												<span>1 hour ago</span>
											</p>
										</div>
										<div class="clearfix"></div>
								</a></li>
								<li class="odd"><a href="#">
										<div class="user_img">
											<img src="images/1.jpg" alt="">
										</div>
										<div class="notification_desc">
											<p>Lorem ipsum dolor amet</p>
											<p>
												<span>1 hour ago</span>
											</p>
										</div>
										<div class="clearfix"></div>
								</a></li>
								<li><a href="#">
										<div class="user_img">
											<img src="images/3.jpg" alt="">
										</div>
										<div class="notification_desc">
											<p>Lorem ipsum dolor amet</p>
											<p>
												<span>1 hour ago</span>
											</p>
										</div>
										<div class="clearfix"></div>
								</a></li>
								<li>
									<div class="notification_bottom">
										<a href="#">See all notifications</a>
									</div>
								</li>
							</ul></li>


						<li class="dropdown head-dpdn"><a href="#"
							class="dropdown-toggle" data-toggle="dropdown"
							aria-expanded="false"><i class="fa fa-tasks"></i></a>
							<ul class="dropdown-menu">
								<li>
									<div class="notification_header">
										<h3>You have 8 pending task</h3>
									</div>
								</li>
								<li><a href="#">
										<div class="task-info">
											<span class="task-desc">Database update</span><span
												class="percentage">40%</span>
											<div class="clearfix"></div>
										</div>
										<div class="progress progress-striped active">
											<div class="bar yellow" style="width: 40%;"></div>
										</div>
								</a></li>
								<li><a href="#">
										<div class="task-info">
											<span class="task-desc">Dashboard done</span><span
												class="percentage">90%</span>
											<div class="clearfix"></div>
										</div>
										<div class="progress progress-striped active">
											<div class="bar green" style="width: 90%;"></div>
										</div>
								</a></li>
								<li><a href="#">
										<div class="task-info">
											<span class="task-desc">Mobile App</span><span
												class="percentage">33%</span>
											<div class="clearfix"></div>
										</div>
										<div class="progress progress-striped active">
											<div class="bar red" style="width: 33%;"></div>
										</div>
								</a></li>
								<li><a href="#">
										<div class="task-info">
											<span class="task-desc">Issues fixed</span><span
												class="percentage">80%</span>
											<div class="clearfix"></div>
										</div>
										<div class="progress progress-striped active">
											<div class="bar  blue" style="width: 80%;"></div>
										</div>
								</a></li>
								<li>
									<div class="notification_bottom">
										<a href="#">See all pending tasks</a>
									</div>
								</li>
							</ul></li>
					</ul>
					<div class="clearfix"></div>
				</div>
				<!--notification menu end -->
				<div class="clearfix"></div>
			</div>
			<div class="header-right">


				<!--search-box-->
				<div class="search-box">
					<form class="input">
						<input class="sb-search-input input__field--madoka"
							placeholder="Search..." type="search" id="input-31" /> <label
							class="input__label" for="input-31"> <svg class="graphic"
								width="100%" height="100%" viewBox="0 0 404 77"
								preserveAspectRatio="none">
								<path d="m0,0l404,0l0,77l-404,0l0,-77z" />
							</svg>
						</label>
					</form>
				</div>
				<!--//end-search-box-->

				<div class="profile_details">
					<ul>
						<li class="dropdown profile_details_drop"><a href="#"
							class="dropdown-toggle" data-toggle="dropdown"
							aria-expanded="false">
								<div class="profile_img">
									<span class="prfil-img"><img src="images/2.jpg" alt="">
									</span>
									<div class="user-name">
										<p>Admin Name</p>
										<span>Administrator</span>
									</div>
									<i class="fa fa-angle-down lnr"></i> <i
										class="fa fa-angle-up lnr"></i>
									<div class="clearfix"></div>
								</div>
						</a>
							<ul class="dropdown-menu drp-mnu">
								<li><a href="#"><i class="fa fa-cog"></i> Settings</a></li>
								<li><a href="#"><i class="fa fa-user"></i> My Account</a></li>
								<li><a href="#"><i class="fa fa-suitcase"></i> Profile</a>
								</li>
								<li><a href="#"><i class="fa fa-sign-out"></i> Logout</a></li>
							</ul></li>
					</ul>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="clearfix"></div>
		</div>
		<!-- //header-ends -->
		<!-- main content start-->
		<div id="page-wrapper">
			<div class="main-page">
				<div class="tables">
					<h2 class="title1">Tables</h2>
					<div class="panel-body widget-shadow">


						<!-- 放映室功能产看布局部分 -->
						<h4>放映室设置</h4>
						<div id="app">
							<div id="apps" class="appss" style="display:none"  >

								<div class="screen">银幕</div>
									<!-- ### -->
								<div v-for="(srow,i) in newseats" class="trs">
									<div v-for="(scolumn,j) in srow"
										:class="scolumn == 0 ? 'no' : 'has'">
										</div>
									<div class="mid-line"></div>
								</div>
							</div>
							
							
							<!--放映室功能设置布局部分  -->
							<div id="apps2" class="appss2" style="display:none"  >
								<div>
									<div style="margin-left:600px">
										<input type="hidden" v-model="rid" />
										<button type="button" @click="setseats(rid)" class="btn btn-success">确定座位</button>
									</div>
								</div>
								<div class="screen">银幕</div>
									<!-- ### -->
								<div v-for="(srow,i) in newseats" class="trs">
									<div v-for="(scolumn,j) in srow"
										:class="scolumn == 0 ? 'no' : 'has'" @click="toggle(i,j)">
										</div>
									<div class="mid-line"></div>
								</div>
								
							</div>
							
							<div>
								<input type="text" v-model="rid"> rname<input
									type="text" v-model="rname" /> rcount<input type="text"
									v-model="rcount" />
								<button @click="saveRoom">添加</button>
							</div>



							<table class="table">
								<tr>
									<th>rid</th>
									<th>rname</th>
									<th>rcount</th>
									<th>放映室管理</th>
									<th>座位管理</th>
								</tr>

								<tr v-for="item in list">
									<td>{{item.rid}}</td>
									<td>{{item.rname}}</td>
									<td>{{item.rcount}}</td>
									<td><a class="btn btn-warning" @click="delSeatAndRoom(item.rid)">删除</a>
										<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" @click="updateRoomUI(item)">
											 修改
											</button>
											<!-- 模态框（Modal） -->
											<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
											 <div class="modal-dialog">
											  <div class="modal-content">
											   <div class="modal-header">
											    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
											     &times;
											    </button>
											    <h4 class="modal-title" id="myModalLabel">
											    </h4>
											   </div>
											   <div class="modal-body">
											     <div id="updateDiv" v-show="flag">
													<input type="hidden" v-model="u_rid" /> <input type="hidden"
														v-model="u_cid" /> rname<input type="text" v-model="u_rname" />
													rcount<input type="text" v-model="u_rcount" />

							                     </div>
											   </div>
											   <div class="modal-footer">
											    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
											    </button>
											    <button type="button" class="btn btn-primary" @click="updateRoom" data-dismiss="modal">
											     确认修改</
											    </button>
											   </div>
											  </div><!-- /.modal-content -->
											 </div><!-- /.modal -->
											</div>

									</td>

									<td><a class="btn btn-success"
										@click="clickFindSeats(item.rid)">查看布局</a> <a
										class="btn btn-success" @click="insertSeats(item.rid)">编辑</a>
									</td>

								</tr>
							</table>

							<!--分页  -->
							<div style="margin-left: 140px;">
								<font size="4px" family="MingLiU">当前第{{pages.p}}页/共{{pages.maxPage}}页</font>
								<button @click='find(1)' class="btn btn-info">首页</button>
								<button @click="find(pages.prev)" class="btn btn-success">上一页</button>
								<span v-for="i in pages.maxPage"
									v-if="i>=pages.startPage&&i<=pages.endPage"> <span
									v-if="i==pages.p" class="btn btn-danger"><font
										color="white">{{i}}</font></span> <span v-if="!(i==pages.p)"
									class="btn" @click="find(i)">{{i}}</span>
								</span>
								<button @click="find(pages.next)" class="btn btn-success">下一页</button>
								<button @click='find(pages.maxPage)' class="btn btn-info">末页</button>

							</div>


						</div>


						<script>
							var vue=new Vue({
								el:"#app",
								data:{
									rid:'',
									rname:'',
									rcount:'',
									sid:'',
									u_rid:'',
									u_cid:'',
									u_rname:'',
									u_rcount:'',
									flag:false,
									pages:'',
									list:[],
									ss:'',
									flags:false,
									// 0 表示空位置， 1表示有人
									bjseats:[],
									seats: [
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],	
										[0,0,0,0,0,0,0,0,0,0,0],
										[0,0,0,0,0,0,0,0,0,0,0],
									],
									newseats: [],

								
								},
								created(){
									this.find(1);
								},
								methods:{
									
									//切换座位状态
									toggle(i,j) {
										var copyArr = this.newseats.slice();
										copyArr[i][j] = copyArr[i][j] == 1 ? 0 : 1;
										this.newseats = copyArr;
										
										console.log(copyArr[i][j]==1);
									},
									
									
									/* 实现查看布局 */
									clickFindSeats(rid){
										
										var self = this;
										layer.open({
											  type: 1,
											  skin: 'layui-layer-demo', //样式类名
											  closeBtn: 1, //不显示关闭按钮
											  anim: 2,
											  shade:false,
											  shadeClose: true, //开启遮罩关闭
											  area: ['1400px', '600px'],
											  content: $('#apps'),
											  title:'座位布局浏览',
											  success: function(){
												  console.log("xxxxxxxxxxxxxxxxxxxxxxx"+rid);
												  self.findSeats(rid);
											  },
											  cancel: function() {
												 $("#apps").css("display","none");
											 	// location.reload();
											  }
										});
										console.log("11111");
									},
									//查看座位方法
									findSeats(rid){
										this.newseats=[];
										
										for(p in this.seats) {
											for(pp in this.seats[p]) {
												this.seats[p][pp] = 0;
											}
										}
										
										var sss =[];
										var self = this;
										this.$http.get("http://localhost/seats",{params:{"rid":rid}}).then(function(result){
											var sss = result.body;
										 	for(i in sss){
										 		self.seats[sss[i].index[0]][sss[i].index[1]] = 1;
											} 
										
										 	console.log(self.seats + "@@@@####");
										 	
										 	
										 	var copyArr = self.seats.slice();
										 	console.log(self.newseats == copyArr);
										 	self.newseats = copyArr;	
										 	
										});
									},
									
									
									//加框架（总体框架备份）
									findkj(rid){
										var self = this;
										
										this.$http.get("http://localhost/seats",{params:{"rid":rid}}).then(function(result){
											var sss = result.body;

										 	for(i in sss){
												
										 		self.seats[sss[i].index[0]][sss[i].index[1]] = 0;
												
											} 
										 	
										 	self.newseats = self.seats;
										 	console.log(self.newseats);
										});
									},
									
									//加入座位方法
									insertSeats(rid){
										var self = this;
										self.rid = rid;
										layer.open({
											  type: 1,
											  skin: 'layui-layer-demo', //样式类名
											  closeBtn: 1, //不显示关闭按钮
											  anim: 2,
											  shade:false,
											  shadeClose: true, //开启遮罩关闭
											  area: ['1400px', '600px'],
											  content: $('#apps2'),
											  title:'设置座位布局',
											  success: function(){
												  console.log("++++++++++"+rid);
												  self.findSeats(rid);
											 },
											  cancel: function() {
												 $("#apps2").css("display","none");
											  }
										  
										});
										console.log("222222222222222222222222");
										
									}
									,
									//增加放映室方法
									saveRoom(){
										var json={rid:this.rid,rname:this.rname,rcount:this.rcount};
										this.$http.post("http://localhost/rooms",json).then(function(){
											this.find(this.pages.maxPage);
											this.rname=this.rcount="";
										});
									},
									//删除座位方法
									delSeat(rid){
										this.$http.post("http://localhost/seats",{"rid":rid,"_method":"delete"},{emulateJSON:true}).then(function(){
										});
									},
									
									//删除放映室的条件（先删除座位）
									delRoom(rid){
										this.$http.post("http://localhost/rooms",{"rid":rid,"_method":"delete"}, {emulateJSON:true}).then(function(){
											layer.msg('删除成功');
											this.find(this.pages.p);
										});
									},
									
									//删除放映室和座位
									delSeatAndRoom(rid){
										this.$http.post("http://localhost/seats",{"rid":rid,"_method":"delete"},{emulateJSON:true}).then(function(){
											this.delRoom(rid);
										});
									},
									
									//修改放映室
									updateRoomUI(item) {
										this.flag = true;
										this.u_rid = item.rid;
										this.u_cid = item.cid;
										this.u_rname=item.rname;
										this.u_rcount=item.rcount;
										this.find(this.pages.p);
									},
									updateRoom(item) {
										var json = {rid:this.u_rid,cid:this.u_cid, rname:this.u_rname, rcount:this.u_rcount,"_method":"put"};
										this.$http.post("http://localhost/rooms",json, {emulateJSON:true}).then(function() {
											this.find(this.pages.p);
										layer.alert('修改成功', {icon: 6});
										});
									},
									
									//删除放映室和座位
									//分页+查看界面
									find(page){
										var self=this;
										this.$http.get("http://localhost/rooms",{params:{p:page}}).then(function(result){
											self.list=result.body.list;
											self.pages=result.body;
										});
									},
						/* 			setSeatsAll(){
										var self = this;
										console.log(this.newseats);
										for(i in self.newseats){
											for(j in self.newseats){
												self.newseats[i][j]=1;
											}
										};
									
										console.log(this.newseats+"```");
										this.newseats = self.newseats;
										
									},
									 */
									//选座位方法
									setseats(rid) {
										console.log(rid+"=================================================");
										var newseats = [];
										// 把那些已经被占的座位的坐标，存入这个order_seats中。
										console.log(this.rid + "~~~~~~~~~~~~~~~~~~~~~~~");
										for(i in this.seats) {
											for(j in this.seats[i]) {
												if(this.seats[i][j] ==1 ) {
													newseats.push({srow:i,scolumn:j});
													console.log(newseats);
								
												}
											}
										}
										// 次数应该把选好的作为的坐标集合，发送给后端程序。        
										this.$http.post("http://localhost/seats",{rid:this.rid,sstate:0,xb:newseats,}).then(function(){
											//this.findAll();
											
										});
										
									}
									
								}
									
							});
					
						</script>
					</div>









					
		<!--footer-->
		<div class="footer">
		  Copyright &copy; 2019.Company name All rights reserved.More
				Templates <a href="http://www.woniuxy.com/" target="_blank"
					title="蜗牛影院">蜗牛影院</a>
	   </div>
		<!--//footer-->
	</div>

	<!-- side nav js -->
	<script src='js/SidebarNav.min.js' type='text/javascript'></script>
	<script>
      $('.sidebar-menu').SidebarNav()
    </script>
	<!-- //side nav js -->

	<!-- Classie -->
	<!-- for toggle left push menu script -->
	<script src="js/classie.js"></script>
	<script>
			var menuLeft = document.getElementById( 'cbp-spmenu-s1' ),
				showLeftPush = document.getElementById( 'showLeftPush' ),
				body = document.body;
				
			showLeftPush.onclick = function() {
				classie.toggle( this, 'active' );
				classie.toggle( body, 'cbp-spmenu-push-toright' );
				classie.toggle( menuLeft, 'cbp-spmenu-open' );
				disableOther( 'showLeftPush' );
			};
			
			function disableOther( button ) {
				if( button !== 'showLeftPush' ) {
					classie.toggle( showLeftPush, 'disabled' );
				}
			}
		</script>
	<!-- //Classie -->
	<!-- //for toggle left push menu script -->

	<!--scrolling js-->
	<script src="js/jquery.nicescroll.js"></script>
	<script src="js/scripts.js"></script>
	<!--//scrolling js-->

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.js"> </script>
<script> 
					    var socket;  
					    if(typeof(WebSocket) == "undefined") {  
					        console.log("您的浏览器不支持WebSocket");  
					    }else{  
					        console.log("您的浏览器支持WebSocket");  
					        	//实现化WebSocket对象，指定要连接的服务器地址与端口  建立连接  
					           socket = new WebSocket("ws://192.168.7.61/websocket");  
					            //打开事件  
					            socket.onopen = function() {  
					                console.log("Socket 已打开");  
					                //socket.send("这是来自客户端的消息" + location.href + new Date());  
					            };  
					            //获得消息事件  
					            socket.onmessage = function(msg) {  
					                console.log(msg.data);
					               
					            
					                /* var div = $("div:eq(0)");
					                var h = $("<h3>");
					               
					                h.append(msg.data[4]);
					                div.append(h) */
					                }
					                //发现消息进入    开始处理前端触发逻辑
					             
					            //关闭事件  
					            socket.onclose = function() {  
					                console.log("Socket已关闭");  
					            };  
					            //发生了错误事件  
					            socket.onerror = function(e) {  
					                alert("Socket发生了错误:" +e);  
					                //此时可以尝试刷新页面
					            }  
					            //离开页面时，关闭socket
					           
					    }
					    var msg =null;
					    var num = null;
					    socket.onmessage = function(msg) {  
					        console.log(msg.data);
					        msg=msg.data;
					        
					        vue.ms = msg;
					        num++;
					        vue.num = num;
					        
					      
					        }
					    
					     var vue = new Vue({
					    	el:"#socket",
					    	data:{
					    		ms:'',
					    		num:''
					    		
					    	},
					    	methods:{
					    		clear(ms,num){
					    			this.ms=null;
					    			this.num=null;
					    		}
					    	}
					     	
					    	 
					    }) 
					   
						</script>
</body>
</html>